<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CART Performance Measures: Gini Impurity & Entropy - Interactive Playbook</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #764ba2;
            margin: 20px 0 15px 0;
            font-size: 1.5em;
        }

        .emoji {
            font-size: 1.2em;
        }

        .analogy-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #ff6b6b;
        }

        .analogy-box h4 {
            color: #c92a2a;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .formula-box {
            background: #e3f2fd;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #2196f3;
            font-family: 'Courier New', monospace;
        }

        .formula {
            font-size: 1.3em;
            text-align: center;
            margin: 15px 0;
            color: #1565c0;
            font-weight: bold;
        }

        .interactive-demo {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .calculator {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group label {
            font-weight: bold;
            color: #495057;
            font-size: 1.1em;
        }

        .input-group input {
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result-box {
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-box h4 {
            color: #155724;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .result-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #155724;
            margin: 10px 0;
        }

        .visual-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .box {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            color: white;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s;
        }

        .box:hover {
            transform: scale(1.05);
        }

        .red-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .blue-box {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .green-box {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .yellow-box {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .quiz-section {
            background: #fff3cd;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #ffc107;
        }

        .quiz-question {
            margin-bottom: 20px;
        }

        .quiz-question h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 15px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: #f8f9fa;
            border-color: #667eea;
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .key-point {
            background: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #2196f3;
            border-radius: 5px;
            margin: 15px 0;
        }

        .key-point strong {
            color: #1565c0;
        }

        .chart-container {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        canvas {
            max-width: 100%;
            height: auto !important;
        }

        .score-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.3em;
            font-weight: bold;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .section {
                padding: 20px;
            }

            .visual-demo {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå≥ CART Performance Measures üå≥</h1>
            <p>Understanding Gini Impurity & Entropy</p>
            <p style="font-size: 0.9em; margin-top: 10px;">Interactive Playbook for Middle & High School Students</p>
        </div>

        <div class="content">
            <!-- Introduction Section -->
            <div class="section">
                <h2><span class="emoji">üéØ</span> What Are We Measuring?</h2>
                <p style="font-size: 1.1em;">When decision trees make splits, they need to know: <strong>"Is this split making my groups more pure or more mixed?"</strong></p>
                
                <div class="analogy-box">
                    <h4>üé® The M&M Analogy</h4>
                    <p>Imagine you have a bowl of M&Ms with different colors mixed together:</p>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><strong>High Impurity (Mixed Bowl):</strong> Red, blue, green, and yellow M&Ms all mixed up - it's chaotic! üåà</li>
                        <li><strong>Low Impurity (Pure Bowl):</strong> All M&Ms are the same color - it's organized! üîµ</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Decision trees want to create "pure bowls" where each group contains mostly one type (class)!</strong></p>
                </div>

                <p style="font-size: 1.1em; margin-top: 20px;">We use two main measures to quantify impurity:</p>
                <div class="visual-demo">
                    <div class="box blue-box">
                        <span style="font-size: 2em;">üé≤</span>
                        <div>Gini Impurity</div>
                        <div style="font-size: 0.9em;">Probability-based</div>
                    </div>
                    <div class="box green-box">
                        <span style="font-size: 2em;">üìä</span>
                        <div>Entropy</div>
                        <div style="font-size: 0.9em;">Information-based</div>
                    </div>
                </div>
            </div>

            <!-- Gini Impurity Section -->
            <div class="section">
                <h2><span class="emoji">üé≤</span> Gini Impurity</h2>
                
                <h3>What Is It?</h3>
                <p style="font-size: 1.1em;">Gini Impurity measures the probability of <strong>incorrectly classifying</strong> a randomly chosen element if it was randomly labeled according to the distribution in the group.</p>

                <div class="analogy-box">
                    <h4>üéØ The Basketball Team Analogy</h4>
                    <p>You're picking students randomly from a gym class to guess their skill level:</p>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><strong>Low Gini (Pure Group):</strong> 90% are beginners ‚Üí You'll probably guess right!</li>
                        <li><strong>High Gini (Mixed Group):</strong> 40% beginners, 35% intermediate, 25% advanced ‚Üí Hard to guess correctly!</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Lower Gini = More pure = Easier to classify correctly!</strong></p>
                </div>

                <div class="formula-box">
                    <h4 style="color: #1565c0; margin-bottom: 15px;">The Formula:</h4>
                    <div class="formula">Gini = 1 - Œ£(p<sub>i</sub>)<sup>2</sup></div>
                    <p style="margin-top: 15px; font-family: 'Segoe UI', sans-serif;">Where:</p>
                    <ul style="margin-left: 20px; margin-top: 10px; font-family: 'Segoe UI', sans-serif;">
                        <li><strong>p<sub>i</sub></strong> = proportion (probability) of class <em>i</em></li>
                        <li><strong>Œ£</strong> = sum across all classes</li>
                    </ul>
                    <div class="key-point" style="margin-top: 15px;">
                        <strong>Key Insight:</strong> Gini ranges from 0 (perfectly pure) to 0.5 (maximally impure for binary classification)
                    </div>
                </div>

                <h3>Let's Calculate! üßÆ</h3>
                <div class="interactive-demo">
                    <h4 style="color: #667eea; margin-bottom: 15px;">Interactive Gini Calculator</h4>
                    <p>Enter the number of items in each class:</p>
                    
                    <div class="calculator">
                        <div class="input-group">
                            <label for="gini-class1">üî¥ Class A (e.g., Red M&Ms):</label>
                            <input type="number" id="gini-class1" min="0" value="40" placeholder="Number in Class A">
                        </div>
                        <div class="input-group">
                            <label for="gini-class2">üîµ Class B (e.g., Blue M&Ms):</label>
                            <input type="number" id="gini-class2" min="0" value="10" placeholder="Number in Class B">
                        </div>
                        <button class="btn" onclick="calculateGini()">Calculate Gini Impurity</button>
                    </div>

                    <div id="gini-result" class="result-box">
                        <h4>Results:</h4>
                        <div id="gini-calculation"></div>
                    </div>
                </div>

                <h3>Visual Examples:</h3>
                <div class="visual-demo">
                    <div class="box green-box">
                        <div style="font-size: 2.5em;">‚úÖ</div>
                        <div><strong>Pure Group</strong></div>
                        <div>100 Red, 0 Blue</div>
                        <div style="font-size: 1.2em;">Gini = 0.0</div>
                    </div>
                    <div class="box yellow-box">
                        <div style="font-size: 2.5em;">‚ö†Ô∏è</div>
                        <div><strong>Mostly Pure</strong></div>
                        <div>80 Red, 20 Blue</div>
                        <div style="font-size: 1.2em;">Gini = 0.32</div>
                    </div>
                    <div class="box red-box">
                        <div style="font-size: 2.5em;">‚ùå</div>
                        <div><strong>Very Mixed</strong></div>
                        <div>50 Red, 50 Blue</div>
                        <div style="font-size: 1.2em;">Gini = 0.5</div>
                    </div>
                </div>
            </div>

            <!-- Entropy Section -->
            <div class="section">
                <h2><span class="emoji">üìä</span> Entropy</h2>
                
                <h3>What Is It?</h3>
                <p style="font-size: 1.1em;">Entropy measures the amount of <strong>disorder</strong> or <strong>randomness</strong> or <strong>uncertainty</strong> in a group. It comes from information theory!</p>

                <div class="analogy-box">
                    <h4>üìö The Messy Bookshelf Analogy</h4>
                    <p>Think about organizing books on a shelf:</p>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><strong>Low Entropy (Organized):</strong> All books are the same genre ‚Üí No surprise when you pick one! üìñ</li>
                        <li><strong>High Entropy (Messy):</strong> Fiction, science, history, comics all mixed ‚Üí Lots of surprise! üìö</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Lower Entropy = More organized = Less surprise = More pure!</strong></p>
                </div>

                <div class="formula-box">
                    <h4 style="color: #1565c0; margin-bottom: 15px;">The Formula:</h4>
                    <div class="formula">Entropy = -Œ£ p<sub>i</sub> √ó log<sub>2</sub>(p<sub>i</sub>)</div>
                    <p style="margin-top: 15px; font-family: 'Segoe UI', sans-serif;">Where:</p>
                    <ul style="margin-left: 20px; margin-top: 10px; font-family: 'Segoe UI', sans-serif;">
                        <li><strong>p<sub>i</sub></strong> = proportion (probability) of class <em>i</em></li>
                        <li><strong>log<sub>2</sub></strong> = logarithm base 2 (measures "bits" of information)</li>
                        <li><strong>Œ£</strong> = sum across all classes</li>
                    </ul>
                    <div class="key-point" style="margin-top: 15px;">
                        <strong>Key Insight:</strong> Entropy ranges from 0 (perfectly pure) to 1 (maximally impure for binary classification)
                    </div>
                </div>

                <h3>Let's Calculate! üßÆ</h3>
                <div class="interactive-demo">
                    <h4 style="color: #667eea; margin-bottom: 15px;">Interactive Entropy Calculator</h4>
                    <p>Enter the number of items in each class:</p>
                    
                    <div class="calculator">
                        <div class="input-group">
                            <label for="entropy-class1">üî¥ Class A (e.g., Fiction Books):</label>
                            <input type="number" id="entropy-class1" min="0" value="40" placeholder="Number in Class A">
                        </div>
                        <div class="input-group">
                            <label for="entropy-class2">üîµ Class B (e.g., Non-Fiction Books):</label>
                            <input type="number" id="entropy-class2" min="0" value="10" placeholder="Number in Class B">
                        </div>
                        <button class="btn" onclick="calculateEntropy()">Calculate Entropy</button>
                    </div>

                    <div id="entropy-result" class="result-box">
                        <h4>Results:</h4>
                        <div id="entropy-calculation"></div>
                    </div>
                </div>

                <h3>Visual Examples:</h3>
                <div class="visual-demo">
                    <div class="box green-box">
                        <div style="font-size: 2.5em;">‚úÖ</div>
                        <div><strong>Pure Group</strong></div>
                        <div>100 Fiction, 0 Non-fiction</div>
                        <div style="font-size: 1.2em;">Entropy = 0.0</div>
                    </div>
                    <div class="box yellow-box">
                        <div style="font-size: 2.5em;">‚ö†Ô∏è</div>
                        <div><strong>Mostly Pure</strong></div>
                        <div>80 Fiction, 20 Non-fiction</div>
                        <div style="font-size: 1.2em;">Entropy = 0.72</div>
                    </div>
                    <div class="box red-box">
                        <div style="font-size: 2.5em;">‚ùå</div>
                        <div><strong>Very Mixed</strong></div>
                        <div>50 Fiction, 50 Non-fiction</div>
                        <div style="font-size: 1.2em;">Entropy = 1.0</div>
                    </div>
                </div>
            </div>

            <!-- Information Gain Section -->
            <div class="section">
                <h2><span class="emoji">üìà</span> Information Gain</h2>
                
                <p style="font-size: 1.1em;">Information Gain tells us <strong>how much better</strong> our split is compared to before the split!</p>

                <div class="formula-box">
                    <h4 style="color: #1565c0; margin-bottom: 15px;">The Formula:</h4>
                    <div class="formula">Information Gain = Entropy(parent) - Weighted Average of Entropy(children)</div>
                    <div class="key-point" style="margin-top: 15px;">
                        <strong>Key Insight:</strong> Higher Information Gain = Better split! We choose the split that gives us the maximum information gain.
                    </div>
                </div>

                <div class="analogy-box">
                    <h4>üéì The Class Organization Analogy</h4>
                    <p>You're organizing students for group projects:</p>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><strong>Before split:</strong> 50 freshmen and 50 seniors all mixed together</li>
                        <li><strong>After split by grade:</strong> Group 1 has 50 freshmen, Group 2 has 50 seniors</li>
                        <li><strong>Information Gain:</strong> From maximum confusion (entropy=1.0) to perfect organization (entropy=0.0)!</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>The split by grade gave us maximum information gain!</strong></p>
                </div>
            </div>

            <!-- Comparison Section -->
            <div class="section">
                <h2><span class="emoji">‚öñÔ∏è</span> Gini vs. Entropy: Head-to-Head</h2>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Gini Impurity üé≤</th>
                            <th>Entropy üìä</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>What it measures</strong></td>
                            <td>Probability of misclassification</td>
                            <td>Amount of disorder/uncertainty</td>
                        </tr>
                        <tr>
                            <td><strong>Range (binary)</strong></td>
                            <td>0 to 0.5</td>
                            <td>0 to 1.0</td>
                        </tr>
                        <tr>
                            <td><strong>Calculation speed</strong></td>
                            <td>‚ö° Faster (no logarithm)</td>
                            <td>üê¢ Slower (uses log<sub>2</sub>)</td>
                        </tr>
                        <tr>
                            <td><strong>Sensitivity</strong></td>
                            <td>Less sensitive to changes</td>
                            <td>More sensitive to changes</td>
                        </tr>
                        <tr>
                            <td><strong>Origin</strong></td>
                            <td>Economics/Statistics</td>
                            <td>Information Theory</td>
                        </tr>
                        <tr>
                            <td><strong>Default in sklearn</strong></td>
                            <td>‚úÖ Yes (default)</td>
                            <td>Optional</td>
                        </tr>
                        <tr>
                            <td><strong>When to use</strong></td>
                            <td>General purpose, faster trees</td>
                            <td>When you need more balanced trees</td>
                        </tr>
                    </tbody>
                </table>

                <div class="key-point" style="margin-top: 20px;">
                    <strong>Pro Tip:</strong> In practice, both metrics usually produce similar trees! Gini is often preferred because it's faster to compute, but entropy can create slightly more balanced trees.
                </div>
            </div>

            <!-- Interactive Quiz Section -->
            <div class="section">
                <h2><span class="emoji">üß†</span> Test Your Understanding!</h2>
                
                <div class="quiz-section">
                    <div class="quiz-question" id="q1">
                        <h4>Question 1: What does a Gini Impurity of 0 mean?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q1', this, false)">
                                A) The group is maximally mixed
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q1', this, true)">
                                B) The group is perfectly pure (all same class)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q1', this, false)">
                                C) There's a 50-50 split between classes
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q1', this, false)">
                                D) We need more data to decide
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q2">
                        <h4>Question 2: For binary classification, what's the maximum value of Gini Impurity?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q2', this, false)">
                                A) 0.0
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q2', this, true)">
                                B) 0.5
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q2', this, false)">
                                C) 1.0
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q2', this, false)">
                                D) It has no maximum
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q3">
                        <h4>Question 3: Which measure uses logarithms in its calculation?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q3', this, false)">
                                A) Gini Impurity
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q3', this, true)">
                                B) Entropy
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q3', this, false)">
                                C) Both
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q3', this, false)">
                                D) Neither
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q4">
                        <h4>Question 4: You have 90 red balls and 10 blue balls. Is this group pure or impure?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q4', this, true)">
                                A) Mostly pure (low impurity)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q4', this, false)">
                                B) Very impure (high impurity)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q4', this, false)">
                                C) Maximally impure
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q4', this, false)">
                                D) Perfectly pure
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q5">
                        <h4>Question 5: What does high Information Gain indicate?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q5', this, false)">
                                A) The split made things worse
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q5', this, true)">
                                B) The split was very effective at separating classes
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q5', this, false)">
                                C) We should not split at all
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q5', this, false)">
                                D) The data has errors
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q6">
                        <h4>Question 6: Which is faster to compute?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q6', this, true)">
                                A) Gini Impurity (no logarithm needed)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q6', this, false)">
                                B) Entropy (uses logarithm)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q6', this, false)">
                                C) They're exactly the same speed
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q6', this, false)">
                                D) Depends on the dataset size
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q7">
                        <h4>Question 7: A node has 50 Class A and 50 Class B. What's the Entropy?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q7', this, false)">
                                A) 0.0 (perfectly pure)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q7', this, false)">
                                C) 0.5 (medium impurity)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q7', this, true)">
                                B) 1.0 (maximally impure)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q7', this, false)">
                                D) 2.0 (very impure)
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question" id="q8">
                        <h4>Question 8: What's the goal of a decision tree when splitting?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer('q8', this, false)">
                                A) Maximize impurity
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q8', this, true)">
                                B) Minimize impurity (maximize purity)
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q8', this, false)">
                                C) Keep impurity constant
                            </div>
                            <div class="quiz-option" onclick="checkAnswer('q8', this, false)">
                                D) Random splits are fine
                            </div>
                        </div>
                    </div>
                </div>

                <div class="score-display" id="score-display">
                    Score: <span id="score">0</span> / 8
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill">0%</div>
                </div>
            </div>

            <!-- Summary Section -->
            <div class="section">
                <h2><span class="emoji">üéì</span> Key Takeaways</h2>
                
                <div class="key-point">
                    <strong>1. Impurity measures disorder:</strong> Both Gini and Entropy measure how "mixed up" a group is. Lower values = more pure!
                </div>

                <div class="key-point">
                    <strong>2. Decision trees seek purity:</strong> Trees split data to create the purest groups possible, making classification easier.
                </div>

                <div class="key-point">
                    <strong>3. Gini is faster:</strong> Gini Impurity is quicker to compute (no logarithm) and is the default in most libraries.
                </div>

                <div class="key-point">
                    <strong>4. Entropy is from information theory:</strong> It measures uncertainty and is slightly more sensitive to changes.
                </div>

                <div class="key-point">
                    <strong>5. Information Gain guides splits:</strong> Trees choose splits that maximize information gain (or equivalently, maximize impurity reduction).
                </div>

                <div class="key-point">
                    <strong>6. Both work well in practice:</strong> While there are theoretical differences, both usually produce similar decision trees!
                </div>

                <div class="analogy-box" style="margin-top: 30px;">
                    <h4>üéØ Final Analogy: The Sorting Game</h4>
                    <p>Think of building a decision tree like sorting a deck of cards:</p>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><strong>Start:</strong> All cards mixed together (high impurity) üé¥</li>
                        <li><strong>First split:</strong> Separate by color (red vs. black) ‚Üí Reduces impurity! üî¥‚ö´</li>
                        <li><strong>Second split:</strong> Separate each by suit ‚Üí Even purer! ‚ô†Ô∏è‚ô•Ô∏è‚ô£Ô∏è‚ô¶Ô∏è</li>
                        <li><strong>Goal:</strong> Each pile contains cards of just one type ‚Üí Perfect purity! ‚ú®</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Gini and Entropy are our "purity meters" that tell us how well we're sorting!</strong></p>
                </div>
            </div>

            <!-- Practice Problems Section -->
            <div class="section">
                <h2><span class="emoji">‚úèÔ∏è</span> Practice Problems</h2>
                
                <div class="interactive-demo">
                    <h4 style="color: #667eea; margin-bottom: 15px;">Try These Scenarios:</h4>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: #495057;">Scenario 1: Email Classification</h4>
                        <p>You have 100 emails: 80 are spam, 20 are not spam.</p>
                        <p><strong>Calculate:</strong> What's the Gini Impurity? Is this group pure or impure?</p>
                        <button class="btn" onclick="showSolution('sol1')" style="margin-top: 10px; padding: 10px 20px; font-size: 1em;">Show Solution</button>
                        <div id="sol1" style="display: none; margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 8px; border-left: 4px solid #28a745;">
                            <strong>Solution:</strong><br>
                            p(spam) = 80/100 = 0.8<br>
                            p(not spam) = 20/100 = 0.2<br>
                            Gini = 1 - (0.8¬≤ + 0.2¬≤) = 1 - (0.64 + 0.04) = 1 - 0.68 = <strong>0.32</strong><br>
                            <strong>Interpretation:</strong> This is moderately pure (closer to 0 than to 0.5). Most emails are spam!
                        </div>
                    </div>

                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: #495057;">Scenario 2: Student Grades</h4>
                        <p>A class has 25 students: 15 got an A, 10 got a B.</p>
                        <p><strong>Calculate:</strong> What's the Entropy? Is this organized or chaotic?</p>
                        <button class="btn" onclick="showSolution('sol2')" style="margin-top: 10px; padding: 10px 20px; font-size: 1em;">Show Solution</button>
                        <div id="sol2" style="display: none; margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 8px; border-left: 4px solid #28a745;">
                            <strong>Solution:</strong><br>
                            p(A) = 15/25 = 0.6<br>
                            p(B) = 10/25 = 0.4<br>
                            Entropy = -(0.6 √ó log‚ÇÇ(0.6) + 0.4 √ó log‚ÇÇ(0.4))<br>
                            = -(0.6 √ó -0.737 + 0.4 √ó -1.322)<br>
                            = -(-0.442 - 0.529) = <strong>0.971</strong><br>
                            <strong>Interpretation:</strong> Fairly high entropy (close to 1.0), indicating a good mix of grades!
                        </div>
                    </div>

                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h4 style="color: #495057;">Scenario 3: Perfect Split</h4>
                        <p>You split 100 mixed students (50 boys, 50 girls) by gender into two groups.</p>
                        <p><strong>Calculate:</strong> What's the Information Gain?</p>
                        <button class="btn" onclick="showSolution('sol3')" style="margin-top: 10px; padding: 10px 20px; font-size: 1em;">Show Solution</button>
                        <div id="sol3" style="display: none; margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 8px; border-left: 4px solid #28a745;">
                            <strong>Solution:</strong><br>
                            <strong>Before split (parent):</strong><br>
                            p(boys) = 0.5, p(girls) = 0.5<br>
                            Entropy(parent) = -(0.5 √ó log‚ÇÇ(0.5) + 0.5 √ó log‚ÇÇ(0.5)) = <strong>1.0</strong> (maximally impure!)<br><br>
                            <strong>After split:</strong><br>
                            Group 1: 50 boys, 0 girls ‚Üí Entropy = 0<br>
                            Group 2: 0 boys, 50 girls ‚Üí Entropy = 0<br>
                            Weighted average = (50/100 √ó 0) + (50/100 √ó 0) = <strong>0</strong><br><br>
                            <strong>Information Gain = 1.0 - 0 = 1.0</strong> üéâ<br>
                            This is a PERFECT split! We went from maximum disorder to perfect order!
                        </div>
                    </div>
                </div>
            </div>

            <!-- Python Code Examples -->
            <div class="section">
                <h2><span class="emoji">üíª</span> Python Code Examples</h2>
                
                <div class="formula-box">
                    <h4 style="color: #1565c0; margin-bottom: 15px;">Calculate Gini Impurity in Python:</h4>
                    <pre style="background: white; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.95em;"><code>import numpy as np

def gini_impurity(class_counts):
    """Calculate Gini Impurity"""
    total = sum(class_counts)
    probabilities = [count / total for count in class_counts]
    gini = 1 - sum([p ** 2 for p in probabilities])
    return gini

# Example: 80 spam, 20 not spam
result = gini_impurity([80, 20])
print(f"Gini Impurity: {result:.4f}")  # Output: 0.3200</code></pre>
                </div>

                <div class="formula-box">
                    <h4 style="color: #1565c0; margin-bottom: 15px;">Calculate Entropy in Python:</h4>
                    <pre style="background: white; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.95em;"><code>import numpy as np

def entropy(class_counts):
    """Calculate Entropy"""
    total = sum(class_counts)
    probabilities = [count / total for count in class_counts]
    # Filter out zero probabilities to avoid log(0)
    probabilities = [p for p in probabilities if p > 0]
    ent = -sum([p * np.log2(p) for p in probabilities])
    return ent

# Example: 15 got A, 10 got B
result = entropy([15, 10])
print(f"Entropy: {result:.4f}")  # Output: 0.9710</code></pre>
                </div>

                <div class="formula-box">
                    <h4 style="color: #1565c0; margin-bottom: 15px;">Using sklearn Decision Tree:</h4>
                    <pre style="background: white; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.95em;"><code>from sklearn.tree import DecisionTreeClassifier

# Using Gini (default)
tree_gini = DecisionTreeClassifier(criterion='gini')

# Using Entropy
tree_entropy = DecisionTreeClassifier(criterion='entropy')

# Both will train on your data
tree_gini.fit(X_train, y_train)
tree_entropy.fit(X_train, y_train)</code></pre>
                </div>
            </div>

            <!-- Footer -->
            <div class="section" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h2 style="color: white;">üéâ Congratulations!</h2>
                <p style="font-size: 1.2em; margin-top: 10px;">You now understand the core performance measures used in decision trees!</p>
                <p style="margin-top: 20px; font-size: 1.1em;">Remember: Lower impurity = Better splits = Better trees! üå≥</p>
                <p style="margin-top: 20px; opacity: 0.9;">Created by Siva Jasthi for Python ML Students</p>
            </div>
        </div>
    </div>

    <script>
        let score = 0;
        let totalQuestions = 8;
        let answeredQuestions = new Set();

        function calculateGini() {
            const class1 = parseFloat(document.getElementById('gini-class1').value) || 0;
            const class2 = parseFloat(document.getElementById('gini-class2').value) || 0;
            const total = class1 + class2;

            if (total === 0) {
                alert('Please enter valid numbers!');
                return;
            }

            const p1 = class1 / total;
            const p2 = class2 / total;
            const gini = 1 - (p1 * p1 + p2 * p2);

            const resultDiv = document.getElementById('gini-result');
            const calculationDiv = document.getElementById('gini-calculation');

            let interpretation = '';
            if (gini < 0.1) {
                interpretation = '‚úÖ <strong>Very Pure!</strong> This group is highly organized with mostly one class.';
            } else if (gini < 0.3) {
                interpretation = 'üëç <strong>Mostly Pure</strong> - One class dominates, but there\'s some mixing.';
            } else if (gini < 0.45) {
                interpretation = '‚ö†Ô∏è <strong>Mixed Group</strong> - Significant representation from both classes.';
            } else {
                interpretation = '‚ùå <strong>Very Impure</strong> - Almost equal split between classes (maximum disorder for binary).';
            }

            calculationDiv.innerHTML = `
                <p><strong>Total items:</strong> ${total}</p>
                <p><strong>Class A probability:</strong> ${class1}/${total} = ${p1.toFixed(4)}</p>
                <p><strong>Class B probability:</strong> ${class2}/${total} = ${p2.toFixed(4)}</p>
                <p><strong>Calculation:</strong> 1 - (${p1.toFixed(4)}¬≤ + ${p2.toFixed(4)}¬≤)</p>
                <p><strong>Calculation:</strong> 1 - (${(p1*p1).toFixed(4)} + ${(p2*p2).toFixed(4)})</p>
                <p><strong>Calculation:</strong> 1 - ${(p1*p1 + p2*p2).toFixed(4)}</p>
                <div class="result-value">Gini Impurity = ${gini.toFixed(4)}</div>
                <p style="margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                    ${interpretation}
                </p>
            `;

            resultDiv.classList.add('show');
        }

        function calculateEntropy() {
            const class1 = parseFloat(document.getElementById('entropy-class1').value) || 0;
            const class2 = parseFloat(document.getElementById('entropy-class2').value) || 0;
            const total = class1 + class2;

            if (total === 0) {
                alert('Please enter valid numbers!');
                return;
            }

            const p1 = class1 / total;
            const p2 = class2 / total;

            // Handle edge cases where probability is 0
            let entropy = 0;
            if (p1 > 0) entropy -= p1 * Math.log2(p1);
            if (p2 > 0) entropy -= p2 * Math.log2(p2);

            const resultDiv = document.getElementById('entropy-result');
            const calculationDiv = document.getElementById('entropy-calculation');

            let interpretation = '';
            if (entropy < 0.1) {
                interpretation = '‚úÖ <strong>Very Organized!</strong> This group has very low uncertainty - almost all one class.';
            } else if (entropy < 0.5) {
                interpretation = 'üëç <strong>Mostly Organized</strong> - Some uncertainty, but one class is dominant.';
            } else if (entropy < 0.9) {
                interpretation = '‚ö†Ô∏è <strong>High Uncertainty</strong> - Significant mixing of both classes.';
            } else {
                interpretation = '‚ùå <strong>Maximum Disorder</strong> - Equal split means maximum uncertainty!';
            }

            let calculation = '<p><strong>Total items:</strong> ' + total + '</p>';
            calculation += '<p><strong>Class A probability:</strong> ' + class1 + '/' + total + ' = ' + p1.toFixed(4) + '</p>';
            calculation += '<p><strong>Class B probability:</strong> ' + class2 + '/' + total + ' = ' + p2.toFixed(4) + '</p>';
            calculation += '<p><strong>Formula:</strong> -(p‚ÇÅ √ó log‚ÇÇ(p‚ÇÅ) + p‚ÇÇ √ó log‚ÇÇ(p‚ÇÇ))</p>';

            if (p1 > 0 && p2 > 0) {
                calculation += '<p><strong>Calculation:</strong> -(' + p1.toFixed(4) + ' √ó ' + Math.log2(p1).toFixed(4) + ' + ' + p2.toFixed(4) + ' √ó ' + Math.log2(p2).toFixed(4) + ')</p>';
                calculation += '<p><strong>Calculation:</strong> -(' + (p1 * Math.log2(p1)).toFixed(4) + ' + ' + (p2 * Math.log2(p2)).toFixed(4) + ')</p>';
            } else if (p1 > 0) {
                calculation += '<p><strong>Calculation:</strong> -(' + p1.toFixed(4) + ' √ó ' + Math.log2(p1).toFixed(4) + ' + 0)</p>';
            } else if (p2 > 0) {
                calculation += '<p><strong>Calculation:</strong> -(0 + ' + p2.toFixed(4) + ' √ó ' + Math.log2(p2).toFixed(4) + ')</p>';
            }

            calculation += '<div class="result-value">Entropy = ' + entropy.toFixed(4) + '</div>';
            calculation += '<p style="margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">' + interpretation + '</p>';

            calculationDiv.innerHTML = calculation;
            resultDiv.classList.add('show');
        }

        function checkAnswer(questionId, element, isCorrect) {
            // Check if already answered
            if (answeredQuestions.has(questionId)) {
                return;
            }

            // Disable all options for this question
            const options = element.parentElement.children;
            for (let option of options) {
                option.style.pointerEvents = 'none';
            }

            if (isCorrect) {
                element.classList.add('correct');
                element.innerHTML += ' ‚úÖ';
                score++;
                answeredQuestions.add(questionId);
            } else {
                element.classList.add('incorrect');
                element.innerHTML += ' ‚ùå';
                // Show the correct answer
                for (let option of options) {
                    if (option.onclick.toString().includes('true')) {
                        option.classList.add('correct');
                        option.innerHTML += ' ‚úÖ (Correct Answer)';
                    }
                }
                answeredQuestions.add(questionId);
            }

            updateScore();
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
            const percentage = (score / totalQuestions) * 100;
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = percentage + '%';
            progressFill.textContent = Math.round(percentage) + '%';

            if (score === totalQuestions) {
                setTimeout(() => {
                    alert('üéâ Congratulations! Perfect score! You\'ve mastered Gini Impurity and Entropy!');
                }, 500);
            }
        }

        function showSolution(solId) {
            const solution = document.getElementById(solId);
            if (solution.style.display === 'none') {
                solution.style.display = 'block';
                event.target.textContent = 'Hide Solution';
            } else {
                solution.style.display = 'none';
                event.target.textContent = 'Show Solution';
            }
        }

        // Initialize progress bar
        window.onload = function() {
            updateScore();
        };
    </script>
</body>
</html>
